<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SAMRAI: SAMRAI::hier::BoxGeometry&lt; DIM &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespaceSAMRAI.html">SAMRAI</a>::<a class="el" href="namespaceSAMRAI_1_1hier.html">hier</a>::<a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a></div>
<h1>SAMRAI::hier::BoxGeometry&lt; DIM &gt; Class Template Reference</h1><!-- doxytag: class="SAMRAI::hier::BoxGeometry" --><code>#include &lt;source/hierarchy/variables/BoxGeometry.h&gt;</code>
<p>
Inheritance diagram for SAMRAI::hier::BoxGeometry&lt; DIM &gt;:<p><center><img src="classSAMRAI_1_1hier_1_1BoxGeometry__inherit__graph.png" border="0" usemap="#SAMRAI_1_1hier_1_1BoxGeometry_3_01DIM_01_4__inherit__map" alt="Inheritance graph"></center>
<map name="SAMRAI_1_1hier_1_1BoxGeometry_3_01DIM_01_4__inherit__map">
<area href="classSAMRAI_1_1pdat_1_1CellGeometry.html" shape="rect" coords="316,7,559,31" alt="">
<area href="classSAMRAI_1_1pdat_1_1EdgeGeometry.html" shape="rect" coords="312,55,563,79" alt="">
<area href="classSAMRAI_1_1pdat_1_1FaceGeometry.html" shape="rect" coords="312,103,563,127" alt="">
<area href="classSAMRAI_1_1pdat_1_1NodeGeometry.html" shape="rect" coords="311,151,564,175" alt="">
<area href="classSAMRAI_1_1pdat_1_1OuteredgeGeometry.html" shape="rect" coords="296,199,579,223" alt="">
<area href="classSAMRAI_1_1pdat_1_1OuterfaceGeometry.html" shape="rect" coords="298,247,578,271" alt="">
<area href="classSAMRAI_1_1pdat_1_1OuternodeGeometry.html" shape="rect" coords="296,295,579,319" alt="">
<area href="classSAMRAI_1_1pdat_1_1OutersideGeometry.html" shape="rect" coords="299,343,576,367" alt="">
<area href="classSAMRAI_1_1pdat_1_1SideGeometry.html" shape="rect" coords="314,391,562,415" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classSAMRAI_1_1hier_1_1BoxGeometry-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#1ca80ab5f5e2609b0824f77ab25d5fb5">BoxGeometry</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#1fbd9ae0e9bb012b7c96d1f81eed82d4">~BoxGeometry</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classSAMRAI_1_1tbox_1_1Pointer.html">tbox::Pointer</a>&lt; <a class="el" href="classSAMRAI_1_1hier_1_1BoxOverlap.html">BoxOverlap</a>&lt;<br>
 DIM &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#a34a45f58e36190c1293c37009406b93">calculateOverlap</a> (const <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>&lt; DIM &gt; &amp;src_geometry, const <a class="el" href="classSAMRAI_1_1hier_1_1Box.html">Box</a>&lt; DIM &gt; &amp;src_mask, const bool overwrite_interior, const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">IntVector</a>&lt; DIM &gt; &amp;src_offset) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classSAMRAI_1_1tbox_1_1Pointer.html">tbox::Pointer</a>&lt; <a class="el" href="classSAMRAI_1_1hier_1_1BoxOverlap.html">BoxOverlap</a>&lt;<br>
 DIM &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#3d88de82c30d5869936c5b080d3323e9">calculateOverlap</a> (const <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>&lt; DIM &gt; &amp;dst_geometry, const <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>&lt; DIM &gt; &amp;src_geometry, const <a class="el" href="classSAMRAI_1_1hier_1_1Box.html">Box</a>&lt; DIM &gt; &amp;src_mask, const bool overwrite_interior, const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">IntVector</a>&lt; DIM &gt; &amp;src_offset, const bool retry) const =0</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;int DIM&gt;<br>
 class SAMRAI::hier::BoxGeometry&lt; DIM &gt;</h3>

Class BoxGeometry&lt;DIM&gt; encapsulates the geometry information associated with data defined over a box region, such as its ghost cell width and the centering or geometry of the data index space. The intersection (or overlap) of two box geometries is generated via member function <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#a34a45f58e36190c1293c37009406b93">calculateOverlap()</a>. The form of this overlap depends on the particular geometry represented by the subclass.<p>
<a class="el" href="classSAMRAI_1_1hier_1_1Box.html">Box</a> geometry objects are created by the patch data factories since patch data objects may not be available for patches that are distributed across processor memories (patch data factories are always replicated).<p>
The concept of ``overlap'' or data dependency is more complex for generic box geometry objects than for just cell-centered box indices in the abstract AMR index space. Problems arise in cases where data lies on the outside corners, faces, or edges of a box. For these data types, it is likely that there will exist duplicate data values on different patches.<p>
The solution implemented here introduces the concept of ``priority'' between patches. Data of patches with higher priority can overwrite the interiors (face, node, or edge values associated with cells that constitute the interior of the patch) of patches with lower priorities, but lower priority patches can never overwrite the interiors of higher priority patches. This scheme introduces a total ordering of data and therefore eliminates the duplicate information problem.<p>
In practice, this protocol means two things: (1) the communication routines must always process copies from low priority sources to high priority sources, and (2) patches must be given special permission to overwrite their interior values during a write. All destinations are therefore represented by three quantities: (1) the box geometry of the destination (which encodes the box, ghost cells, and geometry), (2) the box geometry of the source, and (3) a flag indicating whether the source has a higher priority than the destination (that is, whether the source can overwrite the interior of the destination). If the overwrite flag is set, then data will be copied over the specified box domain and may write into the interior of the destination. If the overwrite flag is not set, then data will be copied only into the ghost cell values and not the interior values of the patch.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classSAMRAI_1_1hier_1_1BoxOverlap.html">hier::BoxOverlap</a> <p>
<a class="el" href="classSAMRAI_1_1hier_1_1PatchDataFactory.html">hier::PatchDataFactory</a> <p>
<a class="el" href="classSAMRAI_1_1hier_1_1PatchData.html">hier::PatchData</a> </dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="1ca80ab5f5e2609b0824f77ab25d5fb5"></a><!-- doxytag: member="SAMRAI::hier::BoxGeometry::BoxGeometry" ref="1ca80ab5f5e2609b0824f77ab25d5fb5" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DIM&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">SAMRAI::hier::BoxGeometry</a>&lt; DIM &gt;::<a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The default constructor for BoxGeometry&lt;DIM&gt; does nothing interesting. 
</div>
</div><p>
<a class="anchor" name="1fbd9ae0e9bb012b7c96d1f81eed82d4"></a><!-- doxytag: member="SAMRAI::hier::BoxGeometry::~BoxGeometry" ref="1fbd9ae0e9bb012b7c96d1f81eed82d4" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DIM&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">SAMRAI::hier::BoxGeometry</a>&lt; DIM &gt;::~<a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The virtual destructor does nothing interesting. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a34a45f58e36190c1293c37009406b93"></a><!-- doxytag: member="SAMRAI::hier::BoxGeometry::calculateOverlap" ref="a34a45f58e36190c1293c37009406b93" args="(const BoxGeometry&lt; DIM &gt; &amp;src_geometry, const Box&lt; DIM &gt; &amp;src_mask, const bool overwrite_interior, const IntVector&lt; DIM &gt; &amp;src_offset) const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DIM&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSAMRAI_1_1tbox_1_1Pointer.html">tbox::Pointer</a>&lt; <a class="el" href="classSAMRAI_1_1hier_1_1BoxOverlap.html">BoxOverlap</a>&lt; DIM &gt; &gt; <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">SAMRAI::hier::BoxGeometry</a>&lt; DIM &gt;::calculateOverlap           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>&lt; DIM &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>src_geometry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1Box.html">Box</a>&lt; DIM &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>src_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&nbsp;</td>
          <td class="paramname"> <em>overwrite_interior</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">IntVector</a>&lt; DIM &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>src_offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculate the overlap between two box geometry objects given the source and destination (given by this) geometries, a source mask, the priority overwrite flag, and an offset between source and destination index spaces. The box overlap description returned by this function will be used in later copy and pack/unpack calls on the patch data object. The offset is from the source space into the destination index space. That is, if p is in the source index space, then p + sourceOffset is the corresponding point in the destination index space. The overwrite flag is used to represent priority between patches. If it is set, then the copy is allowed to modify the interior of the destination region. Note that the source and destination box geometries encode the geometry of the box that they represent; thus, it is possible to calculate intersections between different geometries. This will be necessary when copying data from flux sum counters into a face centered array in the AMR flux synchronization algorithm. 
</div>
</div><p>
<a class="anchor" name="3d88de82c30d5869936c5b080d3323e9"></a><!-- doxytag: member="SAMRAI::hier::BoxGeometry::calculateOverlap" ref="3d88de82c30d5869936c5b080d3323e9" args="(const BoxGeometry&lt; DIM &gt; &amp;dst_geometry, const BoxGeometry&lt; DIM &gt; &amp;src_geometry, const Box&lt; DIM &gt; &amp;src_mask, const bool overwrite_interior, const IntVector&lt; DIM &gt; &amp;src_offset, const bool retry) const =0" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DIM&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classSAMRAI_1_1tbox_1_1Pointer.html">tbox::Pointer</a>&lt; <a class="el" href="classSAMRAI_1_1hier_1_1BoxOverlap.html">BoxOverlap</a>&lt;DIM&gt; &gt; <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">SAMRAI::hier::BoxGeometry</a>&lt; DIM &gt;::calculateOverlap           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>&lt; DIM &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>dst_geometry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html">BoxGeometry</a>&lt; DIM &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>src_geometry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1Box.html">Box</a>&lt; DIM &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>src_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&nbsp;</td>
          <td class="paramname"> <em>overwrite_interior</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSAMRAI_1_1hier_1_1IntVector.html">IntVector</a>&lt; DIM &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>src_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&nbsp;</td>
          <td class="paramname"> <em>retry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculate the overlap between two box geometry objects given the source and destination geometries. This form <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#a34a45f58e36190c1293c37009406b93">calculateOverlap()</a> is redefined by the subclasses of BoxGeometry&lt;DIM&gt; for the appropriate intersection algorithms. If <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#a34a45f58e36190c1293c37009406b93">calculateOverlap()</a> cannot compute the intersection between the two given geometries and retry is true, then <a class="el" href="classSAMRAI_1_1hier_1_1BoxGeometry.html#a34a45f58e36190c1293c37009406b93">calculateOverlap()</a> is called on the destination geometry object with retry set to false (to avoid infinite recursion). This protocol makes it possible to add new box geometry types and still calculate intersections with existing box geometry types. 
<p>
Implemented in <a class="el" href="classSAMRAI_1_1pdat_1_1CellGeometry.html#7c5c374b70ab35b7f78a7559366041a0">SAMRAI::pdat::CellGeometry&lt; DIM &gt;</a>, <a class="el" href="classSAMRAI_1_1pdat_1_1EdgeGeometry.html#e37ff4b6f02129e423ef143297c56fff">SAMRAI::pdat::EdgeGeometry&lt; DIM &gt;</a>, <a class="el" href="classSAMRAI_1_1pdat_1_1FaceGeometry.html#f3dbe18b5e2d46de739fb9785fba08d3">SAMRAI::pdat::FaceGeometry&lt; DIM &gt;</a>, <a class="el" href="classSAMRAI_1_1pdat_1_1NodeGeometry.html#fc68e338d731bc1b4b06401f228722c2">SAMRAI::pdat::NodeGeometry&lt; DIM &gt;</a>, <a class="el" href="classSAMRAI_1_1pdat_1_1OuteredgeGeometry.html#7dfd76ccfba15369689f1e982f7c267e">SAMRAI::pdat::OuteredgeGeometry&lt; DIM &gt;</a>, <a class="el" href="classSAMRAI_1_1pdat_1_1OuterfaceGeometry.html#96c569f1843fbc58d702ebf25f79917e">SAMRAI::pdat::OuterfaceGeometry&lt; DIM &gt;</a>, <a class="el" href="classSAMRAI_1_1pdat_1_1OuternodeGeometry.html#31dd5d89e7f440c314ffc91031b0b881">SAMRAI::pdat::OuternodeGeometry&lt; DIM &gt;</a>, <a class="el" href="classSAMRAI_1_1pdat_1_1OutersideGeometry.html#5f7558876c9ab89fec2a7e73f77ecd50">SAMRAI::pdat::OutersideGeometry&lt; DIM &gt;</a>, and <a class="el" href="classSAMRAI_1_1pdat_1_1SideGeometry.html#d03a8682bf3ca1bbb82f722e2b5cd6b6">SAMRAI::pdat::SideGeometry&lt; DIM &gt;</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>source/hierarchy/variables/<a class="el" href="BoxGeometry_8h.html">BoxGeometry.h</a><li>source/hierarchy/variables/<a class="el" href="BoxGeometry_8C.html">BoxGeometry.C</a><li>source/hierarchy/variables/<a class="el" href="BoxGeometry_8I.html">BoxGeometry.I</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jun 18 11:28:30 2009 for SAMRAI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
