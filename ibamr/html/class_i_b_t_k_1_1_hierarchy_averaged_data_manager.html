<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IBAMR: IBTK::HierarchyAveragedDataManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IBAMR
   </div>
   <div id="projectbrief">An adaptive and distributed-memory parallel implementation of the immersed boundary (IB) method</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_i_b_t_k.html">IBTK</a></li><li class="navelem"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html">HierarchyAveragedDataManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">IBTK::HierarchyAveragedDataManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class <a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html" title="Class HierarchyAveragedDataManager provides a method of tracking and determining periodic steady stat...">HierarchyAveragedDataManager</a> provides a method of tracking and determining periodic steady states of fields. In particular, this class can be used to determine the average of a field over several instances, for example determining the mean flow of a turbulent flow field.  
 <a href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#details">More...</a></p>

<p><code>#include &lt;/home/runner/work/IBAMR/IBAMR/ibtk/include/ibtk/HierarchyAveragedDataManager.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for IBTK::HierarchyAveragedDataManager:</div>
<div class="dyncontent">
<div class="center"><img src="class_i_b_t_k_1_1_hierarchy_averaged_data_manager__inherit__graph.png" border="0" usemap="#a_i_b_t_k_1_1_hierarchy_averaged_data_manager_inherit__map" alt="Inheritance graph"/></div>
<map name="a_i_b_t_k_1_1_hierarchy_averaged_data_manager_inherit__map" id="a_i_b_t_k_1_1_hierarchy_averaged_data_manager_inherit__map">
<area shape="rect" title="Class HierarchyAveragedDataManager provides a method of tracking and determining periodic steady stat..." alt="" coords="7,152,222,192"/>
<area shape="rect" target="_parent" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Serializable.html" title=" " alt="" coords="17,79,212,104"/>
<area shape="poly" title=" " alt="" coords="117,118,117,152,112,152,112,118"/>
<area shape="rect" title=" " alt="" coords="5,5,224,31"/>
<area shape="poly" title=" " alt="" coords="117,44,117,79,112,79,112,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a00a4acd68fec856327765054c7b99b7b" id="r_a00a4acd68fec856327765054c7b99b7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#a00a4acd68fec856327765054c7b99b7b">HierarchyAveragedDataManager</a> (<a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01653.html#ga32db3d9898c44d3b3a578b560f7758cc">std::string</a> object_name, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1Variable.html">SAMRAI::hier::Variable</a>&lt; NDIM &gt; &gt; var, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Database.html">SAMRAI::tbox::Database</a> &gt; input_db, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1GridGeometry.html">SAMRAI::hier::GridGeometry</a>&lt; NDIM &gt; &gt; grid_geom, bool register_for_restart=true)</td></tr>
<tr class="separator:a00a4acd68fec856327765054c7b99b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc61de1c96604693b713532d10f811fa" id="r_adc61de1c96604693b713532d10f811fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#adc61de1c96604693b713532d10f811fa">HierarchyAveragedDataManager</a> (<a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01653.html#ga32db3d9898c44d3b3a578b560f7758cc">std::string</a> object_name, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1Variable.html">SAMRAI::hier::Variable</a>&lt; NDIM &gt; &gt; var, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Database.html">SAMRAI::tbox::Database</a> &gt; input_db, <a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a07286.html">std::set</a>&lt; double &gt; snapshot_time_points, double period_start_time, double period_end_time, double threshold, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1GridGeometry.html">SAMRAI::hier::GridGeometry</a>&lt; NDIM &gt; &gt; grid_geom, bool register_for_restart=true)</td></tr>
<tr class="separator:adc61de1c96604693b713532d10f811fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc93c9afcecc6aaf77271651c308de4d" id="r_adc93c9afcecc6aaf77271651c308de4d"><td class="memItemLeft" align="right" valign="top"><a id="adc93c9afcecc6aaf77271651c308de4d" name="adc93c9afcecc6aaf77271651c308de4d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~HierarchyAveragedDataManager</b> ()=default</td></tr>
<tr class="memdesc:adc93c9afcecc6aaf77271651c308de4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor for class <a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html" title="Class HierarchyAveragedDataManager provides a method of tracking and determining periodic steady stat...">HierarchyAveragedDataManager</a> deallocates patch data as needed. <br /></td></tr>
<tr class="separator:adc93c9afcecc6aaf77271651c308de4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68fc37e6e95c3643f2e2ea0b06f3408d" id="r_a68fc37e6e95c3643f2e2ea0b06f3408d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#a68fc37e6e95c3643f2e2ea0b06f3408d">clearSnapshots</a> ()</td></tr>
<tr class="separator:a68fc37e6e95c3643f2e2ea0b06f3408d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4ad5964bbf670b4a89b7ec611661983" id="r_ad4ad5964bbf670b4a89b7ec611661983"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#ad4ad5964bbf670b4a89b7ec611661983">updateTimeAveragedSnapshot</a> (int u_idx, double time, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1PatchHierarchy.html">SAMRAI::hier::PatchHierarchy</a>&lt; NDIM &gt; &gt; hierarchy, const int wgt_idx=IBTK::invalid_index, double tol=1.0e-8)</td></tr>
<tr class="separator:ad4ad5964bbf670b4a89b7ec611661983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280ced43a5dcf4bd28ab16e0607c822e" id="r_a280ced43a5dcf4bd28ab16e0607c822e"><td class="memItemLeft" align="right" valign="top"><a id="a280ced43a5dcf4bd28ab16e0607c822e" name="a280ced43a5dcf4bd28ab16e0607c822e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>updateTimeAveragedSnapshot</b> (int u_idx, double time, <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1PatchHierarchy.html">SAMRAI::hier::PatchHierarchy</a>&lt; NDIM &gt; &gt; hierarchy, const <a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01653.html#ga32db3d9898c44d3b3a578b560f7758cc">std::string</a> &amp;mean_refine_type, const int wgt_idx=IBTK::invalid_index, double tol=1.0e-8)</td></tr>
<tr class="separator:a280ced43a5dcf4bd28ab16e0607c822e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5779822a6e6a3aa290cb30a2762c8c6" id="r_aa5779822a6e6a3aa290cb30a2762c8c6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#aa5779822a6e6a3aa290cb30a2762c8c6">isAtPeriodicSteadyState</a> ()</td></tr>
<tr class="separator:aa5779822a6e6a3aa290cb30a2762c8c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ef9e488969cb18caf78589743faa2f" id="r_af4ef9e488969cb18caf78589743faa2f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#af4ef9e488969cb18caf78589743faa2f">isAtPeriodicSteadyState</a> (double time, const double tol)</td></tr>
<tr class="separator:af4ef9e488969cb18caf78589743faa2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa172fd7b15b7e52cf0cc3d8c88b4f863" id="r_aa172fd7b15b7e52cf0cc3d8c88b4f863"><td class="memItemLeft" align="right" valign="top">const <a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a07286.html">std::set</a>&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#aa172fd7b15b7e52cf0cc3d8c88b4f863">getSnapshotTimePoints</a> ()</td></tr>
<tr class="separator:aa172fd7b15b7e52cf0cc3d8c88b4f863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf7c09f81a3fee885323861d2d41051" id="r_aebf7c09f81a3fee885323861d2d41051"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#aebf7c09f81a3fee885323861d2d41051">getTimePoint</a> (double time, double tol)</td></tr>
<tr class="separator:aebf7c09f81a3fee885323861d2d41051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f850438bae1d2ed8f6e39f962fb4f25" id="r_a5f850438bae1d2ed8f6e39f962fb4f25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_i_b_t_k_1_1_snapshot_cache.html">SnapshotCache</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#a5f850438bae1d2ed8f6e39f962fb4f25">getSnapshotCache</a> ()</td></tr>
<tr class="separator:a5f850438bae1d2ed8f6e39f962fb4f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00f6bd9556ce17280b5fc20d393c2fe" id="r_aa00f6bd9556ce17280b5fc20d393c2fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#aa00f6bd9556ce17280b5fc20d393c2fe">putToDatabase</a> (<a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Database.html">SAMRAI::tbox::Database</a> &gt; db) override</td></tr>
<tr class="separator:aa00f6bd9556ce17280b5fc20d393c2fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class <a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html" title="Class HierarchyAveragedDataManager provides a method of tracking and determining periodic steady stat...">HierarchyAveragedDataManager</a> provides a method of tracking and determining periodic steady states of fields. In particular, this class can be used to determine the average of a field over several instances, for example determining the mean flow of a turbulent flow field. </p>
<p>The average field is defined as <picture><source srcset="form_212_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \bar{u} = \lim_{N\rightarrow\infty}\frac{1}{N} \sum_{i = 0}^{N-1} u(x,t + i*P)
$" src="form_212.png"/></picture> in which <picture><source srcset="form_213_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ P $" src="form_213.png"/></picture> is the period. This class computes the average <picture><source srcset="form_214_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \bar{u}_N = \frac{1}{N} \sum_{i = 0}^{N-1}
u(x,t + i*P) $" src="form_214.png"/></picture> via the relation <picture><source srcset="form_215_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \bar{u}_N = \frac{N - 1}{N} \bar{u}_{N-1} + \frac{1}{N} u(x, t + (N-1)*P) $" src="form_215.png"/></picture>. The average is considered converged when the L2 norm of <picture><source srcset="form_216_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \frac{1}{N} (\bar{u}_N - u(x, t + (N-1)*P)) $" src="form_216.png"/></picture> is less than some specified threshold.</p>
<p>Note when the period is equal to 0.0, the average field reduces to <picture><source srcset="form_217_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \bar{u} = \lim_{T\rightarrow\infty}
\frac{1}{T} \int_0^T u(x, t_0 + \tau)d\tau $" src="form_217.png"/></picture>. In this case, it is important that snapshots be taken at consistent time intervals to ensure the above recurrence relation still holds.</p>
<p>If requested, this class can output visualization files corresponding to the tracked average and convergence criteria (called 'deviation'). Visualization files are written after every call to updateTimeAveragedSnapshot. Side and face centered variables are assumed to represent d-dimensional vector fields, while all other fields output a depth consistent with the provided variable in the constructor.</p>
<p>A common use of this class is to determine an average flow field over the course of a simulation. For example, the below code will take snapshots of a flow field at specified intervals.</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> (t &lt; T_final)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Advance flow field</span></div>
<div class="line">    ins_integrator-&gt;advanceHierarchy(dt);</div>
<div class="line">    t += dt;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Take a snapshot if at the correct time.</span></div>
<div class="line">    <span class="keywordflow">if</span> (t &gt;= next_snap_time)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">auto</span> var_db = VariableDatabase&lt;NDIM&gt;::getDatabase();</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> u_idx = var_db-&gt;mapVariableAndContextToIndex(ins_hierarchy-&gt;getVelocityVariable(),</div>
<div class="line">                                                               ins_hierarchy-&gt;getCurrentContext());</div>
<div class="line">        <a class="code hl_class" href="class_i_b_t_k_1_1_hierarchy_math_ops.html">HierarchyMathOps</a> hier_math_ops(<span class="stringliteral">&quot;HierarchyMathOps&quot;</span>, patch_hierarchy);</div>
<div class="line">        hier_math_ops.resetLevels(0, patch_hierarchy-&gt;getFinestLevelNumber());</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> wgt_sc_idx = hier_math_ops.getSideWeightPatchDescriptorIndex();</div>
<div class="line">        <span class="keywordtype">bool</span> at_steady_state = hier_avg_data_manager.updateTimeAveragedSnapshot(</div>
<div class="line">                 u_idx, t, patch_hierarchy, <span class="stringliteral">&quot;CONSERVATIVE_LINEAR_REFINE&quot;</span>, wgt_sc_idx, 1.0e-8);</div>
<div class="line">        <span class="keywordflow">if</span> (at_steady_state)</div>
<div class="line">            <a class="code hl_variableRef" href="../../samrai/2.4.4/html/namespaceSAMRAI_1_1tbox.html#1e98e73dc869d986f7ffe5b295075979">pout</a> &lt;&lt; <span class="stringliteral">&quot;Determined steady state!\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_i_b_t_k_1_1_hierarchy_math_ops_html"><div class="ttname"><a href="class_i_b_t_k_1_1_hierarchy_math_ops.html">IBTK::HierarchyMathOps</a></div><div class="ttdoc">Class HierarchyMathOps provides functionality to perform &quot;composite-grid&quot; mathematical operations on ...</div><div class="ttdef"><b>Definition</b> HierarchyMathOps.h:95</div></div>
<div class="ttc" id="anamespaceSAMRAI_1_1tbox_html_1e98e73dc869d986f7ffe5b295075979"><div class="ttname"><a href="../../samrai/2.4.4/html/namespaceSAMRAI_1_1tbox.html#1e98e73dc869d986f7ffe5b295075979">pout</a></div><div class="ttdeci">std::ostream pout</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a00a4acd68fec856327765054c7b99b7b" name="a00a4acd68fec856327765054c7b99b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00a4acd68fec856327765054c7b99b7b">&#9670;&#160;</a></span>HierarchyAveragedDataManager() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IBTK::HierarchyAveragedDataManager::HierarchyAveragedDataManager </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01653.html#ga32db3d9898c44d3b3a578b560f7758cc">std::string</a>&#160;</td>
          <td class="paramname"><em>object_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1Variable.html">SAMRAI::hier::Variable</a>&lt; NDIM &gt; &gt;&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Database.html">SAMRAI::tbox::Database</a> &gt;&#160;</td>
          <td class="paramname"><em>input_db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1GridGeometry.html">SAMRAI::hier::GridGeometry</a>&lt; NDIM &gt; &gt;&#160;</td>
          <td class="paramname"><em>grid_geom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>register_for_restart</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The constructor for class <a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html" title="Class HierarchyAveragedDataManager provides a method of tracking and determining periodic steady stat...">HierarchyAveragedDataManager</a> sets some default values and determines data centering. The expected period and number of snapshots must be set in the input database. This class assumes the snapshots will be taken at equidistant points along the periodic interval.</p>
<p>The input database is searched for the following keys:</p><ul>
<li>'period_start_time' : Double that represents the beginning of the period</li>
<li>'period_end_time' : Double that represents the end of the period. For cases where the period is zero, period_end_time should be set to period_start_time.</li>
<li>'threshold' : Double to determine whether a given time point is at a periodic steady state.</li>
<li>'num_snapshots' : Integer to determine the number of snapshots taken, equally sampled between t_start and t_end.</li>
<li>'enable_logging' : Bool used to determine whether to print convergence information to the log file.</li>
<li>'output_data' : Bool used to determine whether to write visualization files for the mean and deviations.</li>
<li>'dir_dump_name' : String used to determine which folder to write visualization files to. Defaults to "./".</li>
<li>'refine_type' : String to determine which refine operator will be used by default. Defaults to "CONSERVATIVE_LINEAR_REFINE". </li>
</ul>

</div>
</div>
<a id="adc61de1c96604693b713532d10f811fa" name="adc61de1c96604693b713532d10f811fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc61de1c96604693b713532d10f811fa">&#9670;&#160;</a></span>HierarchyAveragedDataManager() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IBTK::HierarchyAveragedDataManager::HierarchyAveragedDataManager </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01653.html#ga32db3d9898c44d3b3a578b560f7758cc">std::string</a>&#160;</td>
          <td class="paramname"><em>object_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1Variable.html">SAMRAI::hier::Variable</a>&lt; NDIM &gt; &gt;&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Database.html">SAMRAI::tbox::Database</a> &gt;&#160;</td>
          <td class="paramname"><em>input_db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a07286.html">std::set</a>&lt; double &gt;&#160;</td>
          <td class="paramname"><em>snapshot_time_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>period_start_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>period_end_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1GridGeometry.html">SAMRAI::hier::GridGeometry</a>&lt; NDIM &gt; &gt;&#160;</td>
          <td class="paramname"><em>grid_geom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>register_for_restart</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The constructor for class <a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html" title="Class HierarchyAveragedDataManager provides a method of tracking and determining periodic steady stat...">HierarchyAveragedDataManager</a> sets some default values and determines data centering. In this constructor, the times at which snapshots are taken are set by arguments.</p>
<p>The input database is searched for the following keys:</p><ul>
<li>'enable_logging' : Bool used to determine whether to print convergence information to the log file.</li>
<li>'output_data' : Bool used to determine whether to write visualization files for the mean and deviations.</li>
<li>'dir_dump_name' : String used to determine which folder to write visualization files to. Defaults to "./". Note that dir_dump_name should be unique from other directories where visualization files are written to prevent conflicts in summary files.</li>
<li>'refine_type' : String to determine which refine operator will be used by default. Defaults to "CONSERVATIVE_LINEAR_REFINE". </li>
</ul>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a68fc37e6e95c3643f2e2ea0b06f3408d" name="a68fc37e6e95c3643f2e2ea0b06f3408d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68fc37e6e95c3643f2e2ea0b06f3408d">&#9670;&#160;</a></span>clearSnapshots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IBTK::HierarchyAveragedDataManager::clearSnapshots </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the snapshots taken with this class. </p>

</div>
</div>
<a id="a5f850438bae1d2ed8f6e39f962fb4f25" name="a5f850438bae1d2ed8f6e39f962fb4f25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f850438bae1d2ed8f6e39f962fb4f25">&#9670;&#160;</a></span>getSnapshotCache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_i_b_t_k_1_1_snapshot_cache.html">SnapshotCache</a> &amp; IBTK::HierarchyAveragedDataManager::getSnapshotCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the <a class="el" href="class_i_b_t_k_1_1_snapshot_cache.html" title="Class SnapshotCache provides a method of storing snapshots of patch data on a snapshot of the patch h...">SnapshotCache</a> object. </p>

</div>
</div>
<a id="aa172fd7b15b7e52cf0cc3d8c88b4f863" name="aa172fd7b15b7e52cf0cc3d8c88b4f863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa172fd7b15b7e52cf0cc3d8c88b4f863">&#9670;&#160;</a></span>getSnapshotTimePoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a07286.html">std::set</a>&lt; double &gt; &amp; IBTK::HierarchyAveragedDataManager::getSnapshotTimePoints </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the time points this class is storing. </p>

</div>
</div>
<a id="aebf7c09f81a3fee885323861d2d41051" name="aebf7c09f81a3fee885323861d2d41051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebf7c09f81a3fee885323861d2d41051">&#9670;&#160;</a></span>getTimePoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double IBTK::HierarchyAveragedDataManager::getTimePoint </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the exact data point at which points are being stored in the internal map. Note that if a time point is not found within the specified tolerance, an unrecoverable error occurs. </p>

</div>
</div>
<a id="aa5779822a6e6a3aa290cb30a2762c8c6" name="aa5779822a6e6a3aa290cb30a2762c8c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5779822a6e6a3aa290cb30a2762c8c6">&#9670;&#160;</a></span>isAtPeriodicSteadyState() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IBTK::HierarchyAveragedDataManager::isAtPeriodicSteadyState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return true if all the tracked mean fields are at a steady state. </p>

</div>
</div>
<a id="af4ef9e488969cb18caf78589743faa2f" name="af4ef9e488969cb18caf78589743faa2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ef9e488969cb18caf78589743faa2f">&#9670;&#160;</a></span>isAtPeriodicSteadyState() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IBTK::HierarchyAveragedDataManager::isAtPeriodicSteadyState </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>tol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return whether the point at the specified time is at a periodic steady state. If multiple time points are found within the provided tolerance, this function returns the closest time that is less than the requested time. </p>

</div>
</div>
<a id="aa00f6bd9556ce17280b5fc20d393c2fe" name="aa00f6bd9556ce17280b5fc20d393c2fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00f6bd9556ce17280b5fc20d393c2fe">&#9670;&#160;</a></span>putToDatabase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void IBTK::HierarchyAveragedDataManager::putToDatabase </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Database.html">SAMRAI::tbox::Database</a> &gt;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write the averaged data manager to a database </p>

<p>Implements <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Serializable.html#d90b74ae3fd7af9a7bb9cbf7f3ebc08a">SAMRAI::tbox::Serializable</a>.</p>

</div>
</div>
<a id="ad4ad5964bbf670b4a89b7ec611661983" name="ad4ad5964bbf670b4a89b7ec611661983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4ad5964bbf670b4a89b7ec611661983">&#9670;&#160;</a></span>updateTimeAveragedSnapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IBTK::HierarchyAveragedDataManager::updateTimeAveragedSnapshot </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>u_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1tbox_1_1Pointer.html">SAMRAI::tbox::Pointer</a>&lt; <a class="elRef" href="../../samrai/2.4.4/html/classSAMRAI_1_1hier_1_1PatchHierarchy.html">SAMRAI::hier::PatchHierarchy</a>&lt; NDIM &gt; &gt;&#160;</td>
          <td class="paramname"><em>hierarchy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>wgt_idx</em> = <code>IBTK::invalid_index</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tol</em> = <code>1.0e-8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update the time averaged snapshot. The update is computed through the relation <picture><source srcset="form_218_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ u_avg = u_avg + 1/N * (u - u_avg) $" src="form_218.png"/></picture> in which N is the number of updates to the snapshot. If this the first update after <a class="el" href="class_i_b_t_k_1_1_hierarchy_averaged_data_manager.html#a68fc37e6e95c3643f2e2ea0b06f3408d">clearSnapshots()</a> is called, we simply copy data.</p>
<p>This function returns true if the snapshot is at a steady state, or that 1/N*||u - u_avg|| &lt; threshold. Note that a weight patch index should be supplied to accurately compute the norm.</p>
<p>If specified in the constructor, this function also writes visualization files for both the mean field and the deviation. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/IBAMR/IBAMR/ibtk/include/ibtk/<b>HierarchyAveragedDataManager.h</b></li>
<li>/home/runner/work/IBAMR/IBAMR/ibtk/src/utilities/<b>HierarchyAveragedDataManager.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 18 2025 04:24:45 for IBAMR by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
