<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IBAMR: Introduction to using git</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">IBAMR
   &#160;<span id="projectnumber">IBAMR version 0.19.</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction to using git</div>  </div>
</div><!--header-->
<div class="contents">

<p>How <a class="el" href="namespaceIBAMR.html">IBAMR</a> uses git for developing new features.  
<a href="#details">More...</a></p>
<h1><a class="anchor" id="autotoc_md18"></a>
Basic git workflows with IBAMR</h1>
<h2><a class="anchor" id="autotoc_md19"></a>
Overview</h2>
<p>Changes to <a class="el" href="namespaceIBAMR.html">IBAMR</a>'s source code are managed with the git version control system. <a class="el" href="namespaceIBAMR.html">IBAMR</a>'s developers work on GitHub with the <a href="https://www.github.com/IBAMR/">https://www.github.com/IBAMR/</a> organization.</p>
<p>GitHub, as the name implies, is a tool for working with git repositories: we use GitHub to track things that need to be fixed or improved in <a class="el" href="namespaceIBAMR.html">IBAMR</a> with the <a href="https://www.github.com/IBAMR/IBAMR/issues">issue tracker</a>.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Using git and IBAMR</h2>
<p><a class="el" href="namespaceIBAMR.html">IBAMR</a> has about a dozen regular contributors, who, at any time, are working on dozens of new features and fixes. We use git to track these changes, handle merging of new features, and keep a log of all commited changes to the library.</p>
<p>Changes to <a class="el" href="namespaceIBAMR.html">IBAMR</a> are peer-reviewed: instead of simply pushing new features as they are finished, all changes undergo a period when the core <a class="el" href="namespaceIBAMR.html">IBAMR</a> developers review the new code and check it for possible bugs, style problems, and consistency with the rest of the library. Git facilitates this workflow with branches*: changes to <a class="el" href="namespaceIBAMR.html">IBAMR</a> are first commited to branches, which are then considered (via GitHub's pull request mechanism) for merging with the master branch of GitHub. This is a simplified variant of what is usually called the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">gitflow</a> model: the primary difference being that our develop and master branches are the same. Some branches for <a class="el" href="namespaceIBAMR.html">IBAMR</a> are actively developed by multiple users; these branches are located in the <a class="el" href="namespaceIBAMR.html">IBAMR</a> repository on GitHub itself. It is also possible to develop branches outside of the <a class="el" href="namespaceIBAMR.html">IBAMR</a> organization: this is discussed below in the <em>Forking, Cloning, and making a simple fix</em> example.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Examples</h2>
<h3><a class="anchor" id="autotoc_md22"></a>
Forking, Cloning, and making a simple fix</h3>
<p>If you are new to git and GitHub we recommend starting with the <a href="https://github.com/octocat/Spoon-Knife">spoon-knife</a> (all its missing is a fork) example to see how forks and clones work.</p>
<p>The easiest way to get started with <a class="el" href="namespaceIBAMR.html">IBAMR</a> is to create a GitHub account and fork* the official (that is, <a href="https://www.github.com/IBAMR/IBAMR">https://www.github.com/IBAMR/IBAMR</a>) <a class="el" href="namespaceIBAMR.html">IBAMR</a> repository by clicking on the Fork button in the top right. This will create a separate copy of the <em>IBAMR/IBAMR</em> repository in your own GitHub account. After doing this, you can <em>clone</em> the repository to your local computer in the same way as was done for <em>Spoon-Knife</em>.</p>
<p>Once you have a local copy of <a class="el" href="namespaceIBAMR.html">IBAMR</a> you can start making changes. With a brand-new repository one usually needs to set their authorship information:</p>
<blockquote class="doxtable">
<p>git config &ndash;local user.name "John Doe" git config &ndash;local user.email "john.doe@lab.gov" </p>
</blockquote>
<p>It is usually helpful to tell the git repository on your computer about a few other git repositories: these are called <em>remotes</em>. The most important remote is your fork on GitHub (which is, itself, another git repository). The convention is to call this remote the <em>origin</em>. Similarly, the official <a class="el" href="namespaceIBAMR.html">IBAMR</a> repository on GitHub is, by convention, called the <em>upstream</em> remote. If you cloned your GitHub fork then that fork should be set as your origin:</p>
<div class="fragment"><div class="line">&gt; git remote show origin</div>
<div class="line">  remote origin</div>
<div class="line">  Fetch URL: https:<span class="comment">//github.com/john.doe/ibamr</span></div>
<div class="line">  Push  URL: https:<span class="comment">//github.com/john.doe/ibamr</span></div>
<div class="line">  HEAD branch: master</div>
<div class="line">  [...]</div>
</div><!-- fragment --><p>if this isn't set up, then try running</p>
<blockquote class="doxtable">
<p>git remote add origin <a href="https://github.com/john.doe/ibamr">https://github.com/john.doe/ibamr</a> </p>
</blockquote>
<p>Use the same command to set up upstream:</p>
<blockquote class="doxtable">
<p>git remote add upstream <a href="https://github.com/ibamr/ibamr">https://github.com/ibamr/ibamr</a> </p>
</blockquote>
<p>That should be all the configuration your local repository needs: at this point your authorship information is set up and the repository is correctly linked with your copy of <a class="el" href="namespaceIBAMR.html">IBAMR</a> on GitHub and the official <a class="el" href="namespaceIBAMR.html">IBAMR</a> repository.</p>
<p>Suppose that you wanted to add another function to <code>ibtk/src/lagrangian/LEInteractor.cpp</code>. You should start by creating a branch with a relevant name. If we added a function that calculated the number of interaction points, for example, we should name it something like</p>
<blockquote class="doxtable">
<p>git checkout -b add-leinteractor-count-ib-points </p>
</blockquote>
<p>Once we are on the branch and have made changes we can stage changes by executing</p>
<blockquote class="doxtable">
<p>git add ibtk/src/lagrangian/LEInteractor.cpp </p>
</blockquote>
<p>and then commit them with a brief but explanatory message:</p>
<blockquote class="doxtable">
<p>git commit -m "Added a function for counting IB points." </p>
</blockquote>
<p>You can inspect the commit by viewing the commit log:</p>
<blockquote class="doxtable">
<p>git log </p>
</blockquote>
<p>which will show the commit message, commit hash, time and date, and authorship information. Once this is done, one can put the commit on GitHub by running</p>
<blockquote class="doxtable">
<p>git push origin add-leinteractor-count-ib-points </p>
</blockquote>
<p>and, navigating to <a href="https://github.com/ibamr/ibamr,">https://github.com/ibamr/ibamr,</a> one can then open a pull request by hitting the button <code>Compare &amp; Pull Request</code>.</p>
<h3><a class="anchor" id="autotoc_md23"></a>
Cleaning up history on a branch</h3>
<p>Sometimes its necessary to take a sequence of commits on a branch (here <code>feature-branch</code>) and reorder, reword, or recombine them in some way. The best way to do this is to do an <em>interactive rebase</em>:</p>
<blockquote class="doxtable">
<p>git checkout feature-branch</p>
<p>git rebase -i master </p>
</blockquote>
<p>This does two things:</p>
<ol type="1">
<li>It puts the commits in <code>feature-branch</code> on top of those in <code>master</code>: if there are merge conflicts, then git will stop and ask you to fix them.</li>
<li>The <code>-i</code> for (interactive) flag displays, in your editor, the commits and their hashes. Each line contains one commit: one can reorder commits by reordering the lines. Changing <code>pick</code> in the leftmost column will alter what is done with the commit:<ul>
<li><code>reword</code>: change the commit message</li>
<li><code>fixup</code>: combine this commit with the one above it. The commit message is removed.</li>
<li><code>squash</code>: combine this commit with the one above it. The commit message is kept.</li>
<li><code>edit</code>: Keep the commit, but pause the rebase afterwards so that one can make additional changes.</li>
</ul>
</li>
</ol>
<p>After rebasing it is necessary to force push the newly edited commit history for <code>feature-branch</code> to the remote branch. This can be achieved using:</p>
<blockquote class="doxtable">
<p>git push -f origin feature-branch </p>
</blockquote>
<p>The commit history for the remote branch should now reflect the edited local changes made to <code>feature-branch</code>. <br  />
</p>
<h3><a class="anchor" id="autotoc_md24"></a>
Keeping a branch up to date</h3>
<p>One can also use rebasing to keep a branch up to date with another branch: suppose you have made lots of commits on <code>feature-branch</code> and other developers have made commits on <code>master</code>. To get commits on master into <code>feature-branch</code> you should run</p>
<blockquote class="doxtable">
<p>git checkout feature-branch</p>
<p>git rebase master </p>
</blockquote>
<p>This will 'replay' the commits in <code>feature-branch</code> on top of (that is, after all of it's commits) <code>master</code>. Rebasing is preferable to merging since it keeps all related commits together. Merging interleaves the commits on <code>master</code> and <code>feature-branch</code>: this is undesirable since it makes it difficult to keep track of which commits are unique to <code>feature-branch</code>.</p>
<p>If there are more commits in another repository that you want on the current branch then you can run, for example,</p>
<blockquote class="doxtable">
<p>git pull origin feature-branch </p>
</blockquote>
<p>to get commits from <code>origin</code>'s branch named <code>feature-branch</code> in the current branch.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Tips and Tricks</h2>
<ul>
<li>Most installations of git include a simple branch and commit visualization tool named <code>gitk</code>; check it out!</li>
<li>Using git from the command line is difficult. We recommend using a graphical interface like Git Cola, GitKraken, Tower, or (for emacs users) magit.</li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
Additional Material</h2>
<p>There are lots of tutorials on the Internet that describe possible workflows with git. We suggest poking around Stack Overflow for information on more complex git commands. Another good resource are the video lectures put out by Wolfgang Bangerth, which are available on YouTube in <a href="https://www.youtube.com/watch?v=kqb3aIakftA">lecture 32.75</a> and <a href="https://www.youtube.com/watch?v=kAqp2hhv-DU">lecture 32.8</a>. The first video gives an overview into how git works and the second discusses how git and GitHub work together. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
